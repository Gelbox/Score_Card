<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AV Solution Scorecard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #212121;
      color: #fff;
      margin: 0;
      padding: 2rem;
    }
    h1, h2 {
      color: #00ffcc;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    label {
      display: block;
      margin-bottom: 0.25rem;
      color: #fff;
    }
    select, input {
      display: block;
      margin: 0.5rem 0;
      padding: 0.5rem;
      background-color: #333;
      border: 1px solid #555;
      color: #fff;
      border-radius: 4px;
      width: calc(100% - 1rem);
    }
    input[type="number"] {
        width: 60px;
    }
    .section {
      margin-bottom: 2rem;
      padding: 1rem;
      background-color: #333;
      border-radius: 8px;
    }
    .result {
      margin-top: 2rem;
      padding: 1rem;
      background-color: #333;
      border-left: 5px solid #00ffcc;
      border-radius: 8px;
    }
    .form-group {
      display: flex;
      align-items: flex-end;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .sub-category {
        margin-left: 2rem;
    }
    canvas {
        background-color: #333;
        padding: 1rem;
        border-radius: 8px;
    }
    .fa-icon {
        color: #00ffcc;
    }
  </style>
</head>
<body>
  <h1><i class="fa-solid fa-square-poll-vertical fa-icon"></i>AV Solution Scorecard</h1>
  <p>Rate each sub-category from 0 (poor) to 5 (excellent), and assign priority weight (1â€“5).</p>

  <form id="scorecardForm">
    <div class="section">
      <h2><i class="fa-solid fa-shield-halved fa-icon"></i>Security</h2>
      <div class="sub-category form-group">
        <div>
          <label>Credential handling:</label>
          <input type="number" name="security_1_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="security_1_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Access control:</label>
          <input type="number" name="security_2_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="security_2_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Encryption support:</label>
          <input type="number" name="security_3_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="security_3_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Patch management process:</label>
          <input type="number" name="security_4_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="security_4_weight" min="1" max="5" required />
        </div>
      </div>
    </div>

    <div class="section">
      <h2><i class="fa-solid fa-server fa-icon"></i>High Availability</h2>
      <div class="sub-category form-group">
        <div>
          <label>Single points of failure:</label>
          <input type="number" name="ha_1_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="ha_1_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Failover/redundancy:</label>
          <input type="number" name="ha_2_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="ha_2_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Power backup:</label>
          <input type="number" name="ha_3_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="ha_3_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Link/path diversity:</label>
          <input type="number" name="ha_4_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="ha_4_weight" min="1" max="5" required />
        </div>
      </div>
    </div>

    <div class="section">
      <h2><i class="fa-solid fa-exchange-alt fa-icon"></i>Interoperability</h2>
      <div class="sub-category form-group">
        <div>
          <label>Standards compliance (AES67, NMOS):</label>
          <input type="number" name="interop_1_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="interop_1_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Vendor interop:</label>
          <input type="number" name="interop_2_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="interop_2_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Protocol compatibility:</label>
          <input type="number" name="interop_3_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="interop_3_weight" min="1" max="5" required />
        </div>
      </div>
    </div>

    <div class="section">
      <h2><i class="fa-solid fa-eye fa-icon"></i>Observability</h2>
      <div class="sub-category form-group">
        <div>
          <label>Logging:</label>
          <input type="number" name="observability_1_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="observability_1_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>SNMP/API support:</label>
          <input type="number" name="observability_2_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="observability_2_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Metrics collection:</label>
          <input type="number" name="observability_3_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="observability_3_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Alerts & monitoring hooks:</label>
          <input type="number" name="observability_4_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="observability_4_weight" min="1" max="5" required />
        </div>
      </div>
    </div>

    <div class="section">
      <h2><i class="fa-solid fa-clock-o fa-icon"></i>Clocking & Sync</h2>
      <div class="sub-category form-group">
        <div>
          <label>PTP support:</label>
          <input type="number" name="clocking_1_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="clocking_1_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Clock stability:</label>
          <input type="number" name="clocking_2_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="clocking_2_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>Recovery behavior:</label>
          <input type="number" name="clocking_3_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="clocking_3_weight" min="1" max="5" required />
        </div>
      </div>
    </div>

    <div class="section">
      <h2><i class="fa-solid fa-network-wired fa-icon"></i>Network Readiness</h2>
      <div class="sub-category form-group">
        <div>
          <label>Multicast handling:</label>
          <input type="number" name="network_1_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="network_1_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>QoS/DSCP marking:</label>
          <input type="number" name="network_2_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="network_2_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>VLAN compatibility:</label>
          <input type="number" name="network_3_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="network_3_weight" min="1" max="5" required />
        </div>
      </div>
      <div class="sub-category form-group">
        <div>
          <label>IGMP/MDNS/DNS:</label>
          <input type="number" name="network_4_score" min="0" max="5" required />
        </div>
        <div>
          <label>Weight:</label>
          <input type="number" name="network_4_weight" min="1" max="5" required />
        </div>
      </div>
    </div>
  </form>

  <div class="result" id="result" style="display:none">
    <h2><i class="fa-solid fa-calculator fa-icon"></i>Overall Score</h2>
    <p id="scoreOutput"></p>
  </div>
  
  <div class="section" id="chartSection" style="display:none">
    <h2><i class="fa-solid fa-chart-line fa-icon"></i>Score Visualization</h2>
    <canvas id="radarChart"></canvas>
  </div>

  <script>
    const fields = [
      { key: 'security_1', label: 'Security: Credential handling' },
      { key: 'security_2', label: 'Security: Access control' },
      { key: 'security_3', label: 'Security: Encryption support' },
      { key: 'security_4', label: 'Security: Patch management process' },
      { key: 'ha_1', label: 'HA: Single points of failure' },
      { key: 'ha_2', label: 'HA: Failover/redundancy' },
      { key: 'ha_3', label: 'HA: Power backup' },
      { key: 'ha_4', label: 'HA: Link/path diversity' },
      { key: 'interop_1', label: 'Interop: Standards compliance' },
      { key: 'interop_2', label: 'Interop: Vendor interop' },
      { key: 'interop_3', label: 'Interop: Protocol compatibility' },
      { key: 'observability_1', label: 'Obs: Logging' },
      { key: 'observability_2', label: 'Obs: SNMP/API support' },
      { key: 'observability_3', label: 'Obs: Metrics collection' },
      { key: 'observability_4', label: 'Obs: Alerts & monitoring hooks' },
      { key: 'clocking_1', label: 'Clocking: PTP support' },
      { key: 'clocking_2', label: 'Clocking: Clock stability' },
      { key: 'clocking_3', label: 'Clocking: Recovery behavior' },
      { key: 'network_1', label: 'Network: Multicast handling' },
      { key: 'network_2', label: 'Network: QoS/DSCP marking' },
      { key: 'network_3', label: 'Network: VLAN compatibility' },
      { key: 'network_4', label: 'Network: IGMP/MDNS/DNS' }
    ];

    let myRadarChart = null;

    function updateScorecard() {
      let totalWeightedScore = 0;
      let totalWeight = 0;
      const scores = [];
      const labels = [];
      let allInputsFilled = true;

      fields.forEach(field => {
        const scoreInput = document.querySelector(`[name=${field.key}_score]`);
        const weightInput = document.querySelector(`[name=${field.key}_weight]`);
        
        if (!scoreInput.value || !weightInput.value) {
          allInputsFilled = false;
        }

        const score = parseFloat(scoreInput.value) || 0;
        const weight = parseFloat(weightInput.value) || 0;
        
        totalWeightedScore += score * weight;
        totalWeight += weight;
        
        scores.push(score);
        labels.push(field.label);
      });

      if (allInputsFilled && totalWeight > 0) {
        const overallScore = (totalWeightedScore / totalWeight).toFixed(2);
        document.getElementById('scoreOutput').textContent = `Weighted Score: ${overallScore} / 5`;
        document.getElementById('result').style.display = 'block';
        document.getElementById('chartSection').style.display = 'block';

        // --- Radar Chart Logic ---
        const ctx = document.getElementById('radarChart').getContext('2d');
        const chartData = {
          labels: labels,
          datasets: [{
            label: 'Solution Score',
            data: scores,
            backgroundColor: 'rgba(0, 255, 204, 0.2)',
            borderColor: '#00ffcc',
            borderWidth: 2,
            pointBackgroundColor: '#00ffcc',
            pointBorderColor: '#fff',
            pointBorderWidth: 1,
            pointRadius: 5
          }]
        };

        const chartOptions = {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            r: {
              angleLines: { color: 'rgba(255, 255, 255, 0.3)' },
              grid: { color: 'rgba(255, 255, 255, 0.3)' },
              pointLabels: { color: '#fff', font: { size: 12 } },
              ticks: {
                beginAtZero: true,
                max: 5,
                stepSize: 1,
                backdropColor: 'transparent',
                color: '#fff'
              }
            }
          },
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function(context) {
                  let label = context.dataset.label || '';
                  if (label) {
                    label += ': ';
                  }
                  if (context.parsed.r !== null) {
                    label += context.parsed.r;
                  }
                  return label;
                }
              }
            }
          }
        };

        if (myRadarChart) {
          myRadarChart.data = chartData;
          myRadarChart.update();
        } else {
          myRadarChart = new Chart(ctx, {
            type: 'radar',
            data: chartData,
            options: chartOptions
          });
        }
      } else {
        document.getElementById('result').style.display = 'none';
        document.getElementById('chartSection').style.display = 'none';
      }
    }

    // Set up event listeners for live updates
    const form = document.getElementById('scorecardForm');
    form.addEventListener('input', updateScorecard);

    // Initial call to set up the chart if any values are pre-filled
    updateScorecard();
  </script>
</body>
</html>
